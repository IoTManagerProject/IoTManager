{
    "mark": "iotm",
    "config": [
        {
            "global": 0,
            "type": "Reading",
            "subtype": "Variable",
            "id": "Tboiler",
            "needSave": 0,
            "widget": "inputDgt",
            "page": "Котёл",
            "descr": "Датчик котла",
            "int": "0",
            "val": "20",
            "map": "1024,1024,1,100",
            "plus": 0,
            "multiply": 1,
            "round": 0
        },
        {
            "global": 0,
            "type": "Reading",
            "subtype": "Variable",
            "id": "SetCH",
            "needSave": 0,
            "widget": "inputDgt",
            "page": "Котёл",
            "descr": "Уставка СО",
            "int": "0",
            "val": "60",
            "map": "1024,1024,1,100",
            "plus": 0,
            "multiply": 1,
            "round": 0
        },
        {
            "global": 0,
            "type": "Reading",
            "subtype": "Variable",
            "id": "CtrlType",
            "needSave": 0,
            "widget": "anydataDef",
            "page": "Состояние",
            "descr": " Тип управления",
            "int": "0",
            "val": "0.0",
            "map": "1024,1024,1,100",
            "plus": 0,
            "multiply": 1,
            "round": 0
        },
        {
            "global": 0,
            "type": "Reading",
            "subtype": "VButton",
            "id": "CmdCH",
            "needSave": 0,
            "widget": "toggle",
            "page": "Котёл",
            "descr": " ВКЛ СО",
            "int": "0",
            "val": "0"
        },
        {
            "global": 0,
            "type": "Reading",
            "subtype": "Variable",
            "id": "StateCH",
            "needSave": 0,
            "widget": "anydataDef",
            "page": "Состояние",
            "descr": "Состояние СО",
            "int": "0",
            "val": "0.0",
            "map": "1024,1024,1,100",
            "plus": 0,
            "multiply": 1,
            "round": 0
        },
        {
            "global": 0,
            "type": "Reading",
            "subtype": "Variable",
            "id": "StateFlame",
            "needSave": 0,
            "widget": "anydataDef",
            "page": "Состояние",
            "descr": "Состояние Нагрева",
            "int": "0",
            "val": "0.0",
            "map": "1024,1024,1,100",
            "plus": 0,
            "multiply": 1,
            "round": 0
        },
        {
            "global": 0,
            "type": "Reading",
            "subtype": "VButton",
            "id": "rele1",
            "needSave": 0,
            "widget": "toggle",
            "page": "Котёл",
            "descr": "rele1",
            "int": "0",
            "val": "0"
        },
        {
            "global": 0,
            "type": "Reading",
            "subtype": "VButton",
            "id": "rele2",
            "needSave": 0,
            "widget": "toggle",
            "page": "Котёл",
            "descr": "rele2",
            "int": "0",
            "val": "0"
        },
        {
            "global": 0,
            "type": "Reading",
            "subtype": "VButton",
            "id": "rele3",
            "needSave": 0,
            "widget": "toggle",
            "page": "Котёл",
            "descr": "rele3",
            "int": "0",
            "val": "0"
        },
        {
            "global": 0,
            "type": "Reading",
            "subtype": "Variable",
            "id": "ModLevel",
            "needSave": 0,
            "widget": "anydataHum",
            "page": "Состояние",
            "descr": "Модуляция",
            "int": "0",
            "val": "0.0",
            "map": "1024,1024,1,100",
            "plus": 0,
            "multiply": 1,
            "round": 0
        },
        {
            "global": 0,
            "type": "Reading",
            "subtype": "VButton",
            "id": "relePump",
            "needSave": 0,
            "widget": "toggle",
            "page": "Котёл",
            "descr": "Реле цирк.насоса",
            "int": "0",
            "val": "0"
        },
        {
            "global": 0,
            "type": "Reading",
            "subtype": "Variable",
            "id": "status",
            "needSave": 0,
            "widget": "anydataDef",
            "page": "Состояние",
            "descr": "  Состояние",
            "int": "0",
            "val": "0.0",
            "map": "1024,1024,1,100",
            "plus": 0,
            "multiply": 1,
            "round": 0
        },
        {
            "global": 0,
            "needSave": 0,
            "type": "Writing",
            "subtype": "ThermostatPID",
            "id": "PID",
            "widget": "anydataHum",
            "page": "Котёл",
            "descr": "термостат",
            "int": 60,
            "round": 1,
            "map": "1,100,1,100",
            "set_id": "SetCH",
            "term_id": "Tboiler",
            "term_rezerv_id": "",
            "rele": "",
            "KP": 5,
            "KI": 50,
            "KD": 1
        },
        {
            "global": 0,
            "type": "Reading",
            "subtype": "BoilerControl",
            "id": "boiler",
            "widget": "anydataWt",
            "page": "Котёл",
            "descr": "Котёл",
            "int": 1,
            "value": "...",
            "debug": "0",
            "telegram": 1,
            "idPID": "PID",
            "idTboiler": "Tboiler",
            "idTret": "Tret",
            "idToutside": "Toutside",
            "idStateCH": "StateCH",
            "idStateFlame": "StateFlame",
            "idModLevel": "ModLevel",
            "idCmdCH": "CmdCH",
            "idCmdDHW": "CmdDHW",
            "idSetCH": "SetCH",
            "idCtrlType": "CtrlType",
            "changeRele": 0,
            "idRelePump": "relePump",
            "minCH": 35,
            "maxCH": 85,
            "gistCH": 5,
            "antiFreez": 10,
            "maxKW": "8"
        }
    ]
}

scenario=>if onStart then
    {
        boiler.addStepPower(1, 3, "rele1");
boiler.addStepPower(2, 5, "rele2", "rele3");
boiler.addStepPower(3, 8, "rele1", "rele2", "rele3");
#boiler.onStepPower(2);
#boiler.autoPower();
    }
